<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title data-i18n="title">Calculateur d'Imp√¥t sur le Revenu</title>
    <link rel="apple-touch-icon" sizes="180x180" href="logos/logo-TrancheMaster.png">
    <link rel="canonical" href="https://odysseu.github.io/HabitatCalc/" />
    <link rel="manifest" href="/TrancheMaster/webmanifest.json">
    <link rel="stylesheet" href="style.css">
    <link id="favicon" rel="icon" href="logos/favicon.ico" type="image/x-icon">
</head>
<body>
    <header class="sticky-header">
        <div class="header-left">
            <div class="github-logo">
                <a href="https://github.com/odysseu/TrancheMaster" target="_self">
                    <img src="logos/logo-TrancheMaster.png" alt="App Logo" class="header-logo" id="github-logo">
                </a>
            </div>
        </div>
        <h1 data-i18n="main-title">Calculateur d'Imp√¥t sur le Revenu</h1>
        <div class="header-right">
            <div class="language-selector-container">
                <select id="language-select">
                    <option value="fr" selected>üá´üá∑ Fran√ßais</option>
                    <option value="en">üá¨üáß English</option>
                </select>
            </div>
            <label class="switch">
                <input type="checkbox" id="dark-mode-toggle">
                <span class="slider round"></span>
            </label>
        </div>
    </header>
    <div class="container">
        <!-- Main mode menu -->
        <div class="menu">
            <button id="revenu-to-impot-btn" class="menu-btn active" data-i18n="revenu-to-impot-btn">Revenu ‚Üí Imp√¥t</button>
            <button id="impot-to-revenu-btn" class="menu-btn" data-i18n="impot-to-revenu-btn">Imp√¥t ‚Üí Revenu</button>
        </div>
        <!-- Revenu ‚Üí Imp√¥t section -->
        <div id="revenu-to-impot-section" class="section active">
            <div class="input-group">
                <label for="revenu" data-i18n="revenu-label">Revenu (‚Ç¨)&nbsp:</label>
                <input type="number" id="revenu" placeholder data-i18n-placeholder="revenu-placeholder" inputmode="decimal" step="0.01">
            </div>
            <div class="input-group">
                <label for="revenu-type" data-i18n="revenu-type-label">Type de revenu&nbsp:</label>
                <div class="menu">
                    <button id="yearly-option-btn" class="menu-btn" data-i18n="yearly-option">Annuel</button>
                    <button id="monthly-option-btn" class="menu-btn active" data-i18n="monthly-option">Mensuel</button>
                </div>
                <!-- <div class="menu">
                    <select id="revenu-type" class="menu-btn">
                        <option value="yearly" data-i18n="yearly-option">Annuel</option>
                        <option value="monthly" data-i18n="monthly-option">Mensuel</option>
                    </select>
                </div> -->
            </div>
            <!-- Menu for 10% or charges -->
            <div class="menu">
                <button id="abattement-btn" class="menu-btn active" data-i18n="abattement-btn">Abattement (10%)</button>
                <button id="fixed-charges-btn" class="menu-btn" data-i18n="fixed-charges-btn">Frais r√©els&nbsp(‚Ç¨)</button>
            </div>
            <div class="input-group" id="fixed-charges-group" style="display: none;">
                <input type="number" id="fixed-charges" placeholder data-i18n-placeholder="fixed-charges-placeholder" inputmode="decimal" step="0.01">
            </div>
            <div class="results">
                <h2 data-i18n="results-title">R√©sultats</h2>
                <p id="tax-percentage" data-i18n-prefix="tax-percentage-prefix"></p>
                <table class="threshold-table">
                    <thead>
                        <tr>
                            <th data-i18n="threshold-column">Tranche</th>
                            <th data-i18n="taxable-amount-column">Montant imposable&nbsp(‚Ç¨)</th>
                            <th data-i18n="rate-column">Taux&nbsp(%)</th>
                            <th data-i18n="tax-column">Imp√¥t&nbsp(‚Ç¨)</th>
                        </tr>
                    </thead>
                    <tbody id="threshold-breakdown">
                        <!-- Filled by JavaScript -->
                    </tbody>
                </table>
                <p id="total-tax" data-i18n-prefix="total-tax-prefix"></p>
                <p id="missing-money" data-i18n-prefix="missing-money-prefix"></p>
            </div>
        </div>
        <!-- Imp√¥t ‚Üí Revenu section -->
        <div id="impot-to-revenu-section" class="section">
            <!-- Menu for percentage or value -->
            <div class="menu">
                <button id="tax-percentage-btn" class="menu-btn active" data-i18n="tax-percentage-btn">Pourcentage d'imposition&nbsp(%)</button>
                <button id="tax-amount-btn" class="menu-btn" data-i18n="tax-amount-btn">Montant de l'imp√¥t&nbsp(‚Ç¨)</button>
            </div>
            <div class="input-group" id="tax-percentage-group">
                <input type="number" id="tax-percentage-input" inputmode="decimal" step="0.01" placeholder data-i18n-placeholder="tax-percentage-placeholder">
            </div>
            <div class="input-group tax-type-group hidden" id="tax-amount-group">
                <input type="number" id="tax-amount" inputmode="decimal" step="0.01" placeholder data-i18n-placeholder="tax-amount-placeholder">
            </div>
            <div class="input-group tax-type-group hidden" id="tax-type-group">
                <select id="tax-type">
                    <option value="yearly" data-i18n="yearly-option">Annuel</option>
                    <option value="monthly" data-i18n="monthly-option">Mensuel</option>
                </select>
            </div>
            <!-- Menu for 10% or charges -->
            <div class="menu">
                <button id="abattement-reverse-btn" class="menu-btn active" data-i18n="abattement-reverse-btn">Abattement&nbsp(10%)</button>
                <button id="fixed-charges-reverse-btn" class="menu-btn" data-i18n="fixed-charges-reverse-btn">Frais r√©els&nbsp(‚Ç¨)</button>
            </div>
            <div class="input-group" id="fixed-charges-group-reverse" style="display: none;">
                <label for="fixed-charges-reverse" data-i18n="fixed-charges-reverse-label">Frais r√©els&nbsp(‚Ç¨) :</label>
                <input type="number" id="fixed-charges-reverse" inputmode="decimal" step="0.01" placeholder data-i18n-placeholder="fixed-charges-reverse-placeholder">
            </div>
            <div class="results">
                <h2 data-i18n="results-title">R√©sultats</h2>
                <p id="calculated-revenu" data-i18n-prefix="calculated-revenu-prefix"></p>
                <!-- Added table for threshold breakdown -->
                <table class="threshold-table" id="threshold-breakdown-reverse">
                    <thead>
                        <tr>
                            <th data-i18n="threshold-column">Tranche</th>
                            <th data-i18n="taxable-amount-column">Montant imposable (‚Ç¨)</th>
                            <th data-i18n="rate-column">Taux (%)</th>
                            <th data-i18n="tax-column">Imp√¥t (‚Ç¨)</th>
                            <th data-i18n="cumulative-tax-column">Imp√¥t cumul√© (‚Ç¨)</th>
                        </tr>
                    </thead>
                    <tbody id="threshold-breakdown-reverse-body">
                        <!-- Filled by JavaScript -->
                    </tbody>
                </table>
            </div>
        </div>
    </div>
    <script type=module src="js/translations.js"></script>
    <script type=module src="js/taxCalculator.js"></script>
    <script type=module src="js/script.js"></script>
</body>
</html>
